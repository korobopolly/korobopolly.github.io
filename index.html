<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MapleStory API Request</title>
</head>
<body>

<h1>MapleStory Character ID Request</h1>

<button id="fetchButton">Get Character ID</button>

<script>
document.getElementById('fetchButton').addEventListener('click', () => {
    var xhr = new XMLHttpRequest();
    const apiKey = 'test_1fb756c153b0d7c70d226191aeaaf26c7bd80b8897221c506a9523b3b3dcf427efe8d04e6d233bd35cf2fabdeb93fb0d';
    var characterName = encodeURIComponent('구명'); // Korean character name encoded for URL

    xhr.open("GET", `https://open.api.nexon.com/maplestory/v1/id?character_name=${characterName}`, true);
    xhr.setRequestHeader('Authorization', `Bearer ${apiKey}`);

    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
            var responseElement = document.createElement('pre'); // Create a new <pre> element
            if (xhr.status == 200) {
                // If the request is successful, display the JSON response
                responseElement.textContent = JSON.stringify(JSON.parse(xhr.responseText), null, 2);
            } else {
                // If the request fails, display the error
                responseElement.textContent = `Error: ${xhr.status} ${xhr.statusText}`;
            }
            // Append the response element below the button
            document.body.appendChild(responseElement);
        }
    };

    xhr.send();
});
</script>

</body>
</html>
