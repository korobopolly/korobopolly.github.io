<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* 숨김 처리된 이미지를 위한 클래스 */
        .hidden {
            display: none;
        }
    </style>
    <title>korobopolly.github.io</title>
    <!-- 파비콘 링크 추가 -->
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <!-- Firebase App (기본 Firebase SDK) -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey           : "AIzaSyBJwiRs6NzoX32ZxXgUc5FtMdOPnxjTo8c",
            authDomain       : "korobopolly.firebaseapp.com",
            projectId        : "korobopolly",
            storageBucket    : "korobopolly.appspot.com",
            messagingSenderId: "81066462526",
            appId            : "1:81066462526:web:4faf6cf5f4ab8e1b60306f",
            measurementId    : "G-XLRLPQ72X9"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db  = getFirestore(app);

        // Function to fetch data from Firestore
        async function fetchData() {
            // const inputElement = document.getElementById('x_SRCH');
            // const docId = inputElement.value;
            // if (!docId) {
            //     console.error('No document ID provided');
            //     return;
            // }

            try {
                const docRef = doc(db, 'database', 'basedata'); // Ensure the collection and docId are correct
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    console.log('I found document!');
                    //console.log('Document data:', docSnap.data());
                    // Json Object를 저장하기
                    localStorage.setItem("docSnap", JSON.stringify(docSnap.data()));
                } else {
                    console.log('No such document!');
                }
            } catch (error) {
                console.error('Error getting document:', error);
            }
        }

        // Set up event listener for the button
        // document.addEventListener('DOMContentLoaded', () => {
        //     const fetchButton = document.getElementById('fetchButton');
        //     fetchButton.addEventListener('click', fetchData);
        // });
        //db 조회
        fetchData();
    </script>
    <script src="main.js" defer></script>
</head>
<body>
    <h1>MapleStory API 활용한 전적검색 사이트</h1>
    <input type="text" id="x_SRCH" placeholder="Enter Your ID">
    <button id="fetchButton">Get Character ID</button>
    <br>

    <div id="info"></div>
    <div id="content"></div>
</body>
</html>
